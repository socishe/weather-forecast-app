(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(49)},26:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(19),i=a.n(r),o=(a(26),a(3)),m=a(4),l=a(6),s=a(5),u=(a(27),a(9)),p=a(7),h=a.n(p),d=a(20),f=a(2),v=(a(29),a(30),function(e){var t=e.data,a=e.units;return c.a.createElement("div",{className:"main-display"},c.a.createElement("h1",{className:"date"},t.date),c.a.createElement("div",{className:"weather-image"},void 0!==t.data.low&&void 0===t.data.high?c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:"http://openweathermap.org/img/w/".concat(t.data.low.weather.icon,".png"),alt:t.data.low.weather.desciption})):c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{src:"http://openweathermap.org/img/w/".concat(t.data.high.weather.icon,".png"),alt:t.data.high.weather.desciption}))),c.a.createElement("div",{className:"temeratures"},void 0!==t.data.low&&c.a.createElement(c.a.Fragment,null,"Min: ","".concat(t.data.low.temp," ").concat(a))),c.a.createElement("div",{className:"temeratures"},void 0!==t.data.high&&c.a.createElement(c.a.Fragment,null,"Max: ","".concat(t.data.high.temp," ").concat(a))))}),E=function(e){var t=e.weather,a=e.units;return c.a.createElement(c.a.Fragment,null,0===t.length?c.a.createElement("div",null,"Loading!"):c.a.createElement("div",{className:"list-group"},t.map((function(e){return c.a.createElement(v,{data:e,key:e.date,units:a})}))))},b=(a(31),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={city:"Cape Town"},e.onFormSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.city)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"inline-input"},c.a.createElement("form",{onSubmit:this.onFormSubmit},c.a.createElement("input",{type:"text",placeholder:"Search for a place",value:this.state.city,onChange:function(t){return e.setState({city:t.target.value})}})))}}]),a}(n.Component)),w=a(8),g=a.n(w),y="986df41cb8f0c0e4760d17130fc344d7",j=function(){var e=Object(n.useState)({city:"Cape Town",tempUnits:"celsius",tempSymbol:"\xb0C"}),t=Object(f.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)({icon:"",main:"",mainTemp:0,timezone:"",temp:{min:0,max:0}}),o=Object(f.a)(i,2),m=o[0],l=o[1],s=Object(n.useState)([]),p=Object(f.a)(s,2),v=p[0],w=p[1],j=Object(n.useState)(!1),O=Object(f.a)(j,2),N=O[0],S=O[1],x=Object(n.useState)(!1),C=Object(f.a)(x,2),k=C[0],F=C[1],T=Object(n.useState)(0),M=Object(f.a)(T,2),U=M[0],W=M[1];Object(n.useEffect)((function(){var e="https://api.openweathermap.org/data/2.5/weather?q=".concat(a.city,"&units=metric&appid=").concat(y);g.a.get(e).then((function(e){var t=e.data;l({icon:t.weather[0].icon,main:t.weather[0].main,timezone:t.timezone,mainTemp:Math.round(t.main.temp),temp:{min:Math.round(t.main.temp_min),max:Math.round(t.main.temp_max)}}),setTimeout((function(){}),12e5)})).catch((function(e){}))}),[a.city]);var _=new Promise((function(e,t){var n="https://api.openweathermap.org/data/2.5/forecast?q=".concat(a.city,"&units=metric&appid=").concat(y);g.a.get(n).then((function(t){var a=t.data;if("200"===a.cod){e(!1);var n=a.list.filter((function(e){var t=e.dt_txt.split(" ")[1];return"00:00:00"===t||"12:00:00"===t})),c=[];n.forEach((function(e){var t=e.dt_txt.split(" ")[0];c[t]?c[t].push(e):c[t]=[e]}));var r=Object.entries(c);r=r.filter((function(e){return 1!==e[1].length}));var i=[];r.forEach((function(e){var t={};e[1].forEach((function(e){var a=e.dt_txt.split(" ")[1],n={temp:Math.round(e.main.temp),weather:e.weather[0]};"12:00:00"===a?t.high=n:t.low=n})),i.push({date:e[0],data:t})})),w(i)}else e(!0)})).catch((function(t){e(!0)}))})),z=Object(n.useCallback)(function(){var e=Object(d.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then((function(e){return e}));case 2:e.sent?a<=16e3?(console.log("Next delay",a),S(!0),W(a),n=setTimeout((function(){k?(F(!1),clearTimeout(n)):z(t,2*a)}),a)):(console.log("Just stop trying."),S(!1),W(0)):(S(!1),W(0));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[a.city,k]);Object(n.useEffect)((function(){z(_,2e3)}),[z]);var J=function(e,t){return"celsius"!==t?(a=e,Math.round(9*a/5+32)):(n=e,Math.round(5*(n-32)/9));var a,n},q=function(e){var t=e.target.value;console.log(t);var n="\xb0C";"celsius"!==t&&(n="\xb0F");var c={icon:m.icon,main:m.main,mainTemp:J(m.mainTemp,t),temp:{min:J(m.temp.min,t),max:J(m.temp.max,t)}};l(c);var i=v.map((function(e){var t=e;return void 0!==t.data.high&&(t.data.high.temp=J(t.data.high.temp,e)),void 0!==t.data.low&&(t.data.low.temp=J(t.data.low.temp,e)),t}));w(i),r(Object(u.a)(Object(u.a)({},a),{},{tempSymbol:n,tempUnits:t}))};return c.a.createElement("div",{className:"card"},c.a.createElement(b,{onSubmit:function(e){r({city:e})}}),c.a.createElement("h1",{className:"main-card-header"},"Weekly weather forecast in ",a.city),c.a.createElement("div",{className:"options-container"},c.a.createElement("label",{htmlFor:"celsius"},c.a.createElement("input",{onChange:q,type:"radio",id:"celsius",checked:"celsius"===a.tempUnits,value:"celsius"}),c.a.createElement("div",null,"Celsius")),c.a.createElement("label",{htmlFor:"fahrenheit"},c.a.createElement("input",{onChange:q,type:"radio",id:"fahrenheit",checked:"fahrenheit"===a.tempUnits,value:"fahrenheit"}),c.a.createElement("div",null,"Fahrenheit"))),c.a.createElement("div",{className:"currentWeather"},c.a.createElement("div",{className:"main-info"},c.a.createElement("div",{className:"temp-measurement"},m.mainTemp),c.a.createElement("div",{className:"temp-unit"},"celsius"===a.tempUnits?"\xb0C":"\xb0F")),c.a.createElement("div",{className:"sub-info"},c.a.createElement("div",{className:"sub-info-datatitle"},"Current Weather Today"),c.a.createElement("div",{className:"sub-info-text"},m.main),c.a.createElement("div",{className:"sub-info-text"},c.a.createElement("span",{className:"max-temp"},c.a.createElement("i",{className:"mdi mdi-arrow-up"}),"".concat(m.temp.min," ").concat(a.tempSymbol)),c.a.createElement("span",{className:"min-temp"},c.a.createElement("i",{className:"mdi mdi-arrow-down"}),"".concat(m.temp.max," ").concat(a.tempSymbol))))),c.a.createElement(E,{weather:v,units:a.tempSymbol}),N&&c.a.createElement("div",{className:"retry-container"},c.a.createElement("button",{className:"retry-btn",onClick:function(){F(!0),S(!1),_.then((function(e){return e}))}},"Retry now"),c.a.createElement("div",null,"Retrying in ".concat(U/1e3," sec."))))},O=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(j,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.aecd8791.chunk.js.map